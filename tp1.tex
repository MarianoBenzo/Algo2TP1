\documentclass[10pt, a4paper]{article}
\usepackage[paper=a4paper, left=1.5cm, right=1.5cm, bottom=1.5cm, top=3.5cm]{geometry}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{indentfirst}
\usepackage{fancyhdr}
\usepackage{latexsym}
\usepackage{lastpage}
\usepackage{aed2-symb,aed2-itef,aed2-tad, caratula}
\usepackage[colorlinks=true, linkcolor=blue]{hyperref}
\usepackage{calc}

\newcommand{\f}[1]{\text{#1}}
\renewcommand{\paratodo}[2]{$\forall~#2$:#1}

\sloppy

%  \hypersetup{%
%   % Para que el PDF se abra a p�gina completa.
%   pdfstartview= {FitH \hypercalcbp{\paperheight-\topmargin-1in-\headheight}},
%   pdfauthor={C�tedra de Algoritmos y Estructuras de Datos II - DC - UBA},
%   pdfkeywords={TADs b�sicos},
%   pdfsubject={Tipos abstractos de datos b�sicos}
%  }

\parskip=5pt % 10pt es el tama�o de fuente

% Pongo en 0 la distancia extra entre �temes.
\let\olditemize\itemize
\def\itemize{\olditemize\itemsep=0pt}

% Acomodo fancyhdr.
\pagestyle{fancy}
\thispagestyle{fancy}
\addtolength{\headheight}{1pt}
\lhead{Algoritmos y Estructuras de Datos II}
\rhead{$1^{\mathrm{er}}$ cuatrimestre de 2015}
\cfoot{\thepage /\pageref{LastPage}}
\renewcommand{\footrulewidth}{0.4pt}

\author{Algoritmos y Estructuras de Datos II, DC, UBA.}
\date{}
\title{Tipos abstractos de datos b�sicos}

\begin{document}


% Estos comandos deben ir antes del \maketitle
\materia{Algoritmos y Estructuras de Datos II} % obligatorio
\submateria{Primer Cuatrimestre de 2015} % opcional
\titulo{Trabajo Pr�ctico 1} % obligatorio
\subtitulo{Especificaci�n} % opcional


\integrante{INTEGRANTE, 1}{123/12}{1@gmail.com} % obligatorio 
\integrante{INTEGRANTE, 2}{123/12}{2@gmail.com} % obligatorio 
\integrante{INTEGRANTE, 3}{123/12}{3@gmail.com} % obligatorio 
\integrante{INTEGRANTE, 4}{123/12}{4@gmail.com} % obligatorio 
%Pagina de titulo e indice
\thispagestyle{empty}

\maketitle
\tableofcontents

\newpage


\section{TAD \tadNombre{Dato}}
\begin{tad}{\tadNombre{Dato}}
\tadGeneros{dato}

\tadIgualdadObservacional{d}{d'}{dato}{$(EsNat?(d)=1\land EsNat?(d)=EsNat?(d'))\impluego DNat(d)=DNat(d') \lor (EsNat?(d)= 0 \land EsNat?(d')=EsNat?(d')) \impluego DString(d)=DString(d')$}

\tadUsa{Bool, Nat, String}

\tadExporta{\tadNombre{}}

\tadObservadores

\tadOperacion{EsNat?}{dato}{bool}{}
\tadOperacion{DNat}{dato/d}{nat}{$EsNat?(d)$}
\tadOperacion{DString}{dato/d}{string}{$\neg EsNat?(d)$}


\tadGeneradores

\tadOperacion{NDat}{bool, nat, string}{dato}{}


\tadAxiomas[]


\tadAxioma{EsNat?(NDato(b,n,s))}{$b$}
\tadAxioma{DNat(NDato(b,n,s))}{$n$}
\tadAxioma{DString(NDato(b,n,s))}{$s$}



\end{tad}


\section{TAD \tadNombre{Registro}}
\begin{tad}{\tadNombre{Registro}}
\tadGeneros{reg}

\tadUsa{Lista, Conjunto, Nat, Bool, \tadNombre{Dato}}

\tadExporta{\tadNombre{}}

\tadIgualdadObservacional{r}{r'}{reg}{$Campos(r)=Campos(r')\land(\forall c: String)tupla(c,bool)\in Campos(r) \impluego Dato?(r)=Dato(r'))$}

\tadObservadores

\tadOperacion{Campos}{reg}{$conj(tupla(string, bool))$}{}
\tadOperacion{Dato?}{reg/r, String/c}{Dato}{$tupla(c,True) \in Campos(r) \lor tupla(c,False) \in Campos(r)$}

\tadGeneradores

\tadOperacion{NReg}{}{reg}{}
\tadOperacion{AgCampo}{reg/r, String/c, Bool/b, Dato/d}{reg}{$EsNat?(d)\equiv b$}

\tadOtrasOperaciones

\tadOperacion{JRegs}{reg/r, reg/s}{reg}{}

\tadAxiomas[]


\tadAxioma{Campos(NReg)}{$\emptyset$}
\tadAxioma{Campos(AgCampo(r, c, b, d))}{$Ag(tupla(c, b))$}
\tadAxioma{Dato?(AgCampo(r, c, b, d), c')}{\IF $c=c'$ THEN
												$d$
												ELSE
												$Dato?(r)$
												FI}
\tadAxioma{Campos(JRegs(r, s))}{$Campos(r) \cup  Campos(s)$}
\tadAxioma{Dato?(JRegs(r, s), c)}{\IF $c \in Campos(r)$ THEN
										$Dato?(r, c)$
										ELSE
										$Dato?(s, c)$
										FI}


\end{tad}


\section{TAD \tadNombre{Tabla}}
\begin{tad}{\tadNombre{Tabla}}
\tadGeneros{tab}

\tadUsa{}

\tadExporta{\tadNombre{}}

\tadIgualdadObservacional{t}{t'}{tab}{$Campos(t)=Campos(t') \land Claves(t)=Claves(t')$}

\tadObservadores


\tadOperacion{CamposT}{tab}{$conj(campo)$}{}
\tadOperacion{Claves}{tab}{$conj(campo)$}{}


\tadGeneradores

\tadOperacion{NTab}{conj(campo/cp,conj(campo)/cl)}{tab}{$($\paratodo{campo}{c}$) c \in cl \implies c \in cp$}


\tadAxiomas[]

\tadAxioma{Campos(NTab(cp, cl))}{$cp$}
\tadAxioma{Claves(NTab(cp, cl))}{$cl$}


\tadAxioma{ERR(rs, c, d)}{\IF $rs = \emptyset$ THEN
												$\emptyset$
												ELSE
													{\IF $d = Dato?(DameUno(rs), c)$ THEN
													$ERR(SinUno(rs), c, d)$
													ELSE
													$Ag(DameUno(rs),ERR(SinUno(rs),c ,d)$
													FI}
												FI}


\end{tad}



\section{TAD \tadNombre{BaseDeDatos}}
\begin{tad}{\tadNombre{BaseDeDatos}}
\tadGeneros{bds}


\tadUsa{Bool, Nat, String, Conjunto, Dicc(clave,significado), Tupla(),Dato, Tabla, Registro}

\tadExporta{}

\tadObservadores

\tadOperacion{Tablas}{bds}{$conj(tupla(tab,(conj(reg), nat))$}{}
\tadOperacion{RegistrosT}{bds/b, tupla(tab, conj(reg),nat)/t}{$(conj(reg), nat))$}{$t \in Tablas(b)$}
\tadOperacion{Joins}{bds}{$dicc(tupla(tab,tab,campo),tab)$}{}
\tadOperacion{}{}{}{}


\tadGeneradores

\tadOperacion{NuevaBase}{conj(tab(tab,conj(reg),nat))}{bds}{}
\tadOperacion{Agtab}{bds/b, tupla(tab,conj(reg),nat)/t}{bds}{$t \notin tabs(bds)$}
\tadOperacion{Agreg}{bds/b, tupla(tab,conj(reg),nat)/t, reg/r}{bds}{$CamposT(\Pi_1(t))=Campos(r) \land (($\paratodo{reg}{r'}, \paratodo{campo}{c}$)(r' \in \Pi_2(t) \land c \in claves(\Pi_1(t))) \impluego (Dato?(r, c) \neq Dato?(r', c)))$}
\tadOperacion{ElimReg}{bds b, tupla(tab,conj(reg),nat))/t, campo/c, dato/d}{bds}{$c \in CamposT(\Pi_1(t)) \land EsNat?(d)=\Pi_2 (c) $}
\tadOperacion{CrearJoin}{bds/b, tab/t1, tab/t2, campo/cl}{bds}{$t1,t2 \in tabs(bds) \land cl \in campos(t1) \land cl \in campos(t2)$}
\tadOperacion{EliminarJoin}{bds b, tab/t1, tab/t2}{bds}{}
\tadOperacion{AgTrigger}{bds b, tab/t1, tab/t2}{bds}{}
\tadOperacion{EliminarTrigger}{bds b, tab/t1, tab/t2}{bds}{}

\tadOtrasOperaciones

\tadOperacion{TopModificadasT}{bds}{$conj(tupla(tabla,conj(reg),nat)$}{}



\tadOperacion{ERR}{conj(reg), campo, dato}{conj(reg)}{}

\tadAxiomas[]

\tadAxioma{Tablas(NuevaBase(cts))}{$cts$}
\tadAxioma{Tablas(Agtab(b, t))}{$Ag(tabs(b), t)$}
\tadAxioma{Tabas(AgReg(b, t, r))}{$Ag(tabs(b), Ag(\Pi_2(t),r)$}
\tadAxioma{Tabas(ElimReg(b, t, r))}{$Tablas(b)-SinReg(t,r)$}
\tadAxioma{Tablas(CrearJoin(b,t1,t2))}{${\emptyset}$}

\tadAxioma{RegistrosT(NuevaBase(cts),t)}{$RegistrosT(b,t)$}
\tadAxioma{RegistrosT(Agtab(b,t1),t)}{$if t=t1 then{\emptyset} else RegistrosT(b,t)fi$}
\tadAxioma{RegistrosT(AgReg(b, t1, r),t)}{$if t=t1 then Ag(Tablas(b), Ag(\Pi_2(t),r) else RegistroT(b,t) fi$}
\tadAxioma{RegistrosT(ElimReg(b, t, r),t)}{$if t=t1 then Ag(Tablas(b), SinReg(t,r) else RegistroT(b,t) fi$}
\tadAxioma{RegistrosT(CrearJoin(b,t1,t2,c))}{${\emptyset}$}

\tadAxioma{Joins(NuevaBase(cts))}{${\emptyset}$}
\tadAxioma{Joins(Agtab(bds, t))}{${\emptyset}$}
\tadAxioma{Joins(CrearJoin(bds, t1, t2, cl))}{}


\end{tad}

\end{document}
